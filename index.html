<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <!--<link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.1/dist/leaflet.css"-->
    <!--integrity="sha512-Rksm5RenBEKSKFjgI3a41vrjkw4EVPlJ3+OiI65vTjIdo9brlAacEuKOiQ5OFh7cOI1bkDwLqdLw3Zg0cRJAAQ=="-->
    <!--crossorigin=""/>-->
    <!--<link rel="stylesheet" href="leaflet/leaflet.css">-->
     <!-- Make sure you put this AFTER Leaflet's CSS -->
    <!--<script src="https://unpkg.com/leaflet@1.3.1/dist/leaflet.js"-->
    <!--integrity="sha512-/Nsx9X4HebavoBvEBuyp3I7od5tA0UzAxs+j83KgC8PU0kgB4XiK4Lfe4y4cgBtaRJQEIFCW+oC506aPT2L1zw=="-->
    <!--crossorigin=""></script>-->
    <script src='https://api.tiles.mapbox.com/mapbox-gl-js/v0.45.0/mapbox-gl.js'></script>
    <link href='https://api.tiles.mapbox.com/mapbox-gl-js/v0.45.0/mapbox-gl.css' rel='stylesheet' />
    <link rel="stylesheet" href="node_modules/bootstrap/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="style.css">
    <title>Leaflet Test</title>
    <style>
        #map {
            position:absolute; top:0; bottom:0; width:100%;
        }
    </style>
</head>
<body>
    <div class="container-fluid">
        <article class="row">
            <div class="col-sm-5">
                <div class="title">
                    <h3><span>Antavo</span><span> Ripples</span></h3>
                </div>
            </div>
            <div class="col-sm-4">
                <div class="last-day">
                    <div class="last-day-wrapper">
                        <div class="active-customers">
                            <div class="wrapper">
                                <p>376 362</p>
                                <p>CUSTOMERS ACTIVE</p>
                                <span>IN THE LAST 24 HOURS</span>
                            </div>
                        </div>
                        <div class="opened-wallets">
                            <div class="wrapper">
                                <p>1 078 922</p>
                                <p>WALLETS OPENED</p>
                                <span>IN THE LAST 24 HOURS</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-sm-3">
                <div class="customers-total">
                    <div class="wrapper">
                        <p class="text-center">23 893 802</p>
                        <span class="text-center">Customers Total</span>
                    </div>
                </div>
            </div>
            <hr>
        </article>
        <div class="row">
            <div class="col-sm-9 map">
                <div id="map"></div>
            </div>
            <article class="col-sm-3 actions">
                <section class="recent-location">
                    <h4 class="text-left">Recent Locations</h4>
                    <hr>
                    <div class="locations-wrapper">
                        <ol>
                            <li >Hamburg, Germany</li>
                            <li>Szeged, Hungary</li>
                            <li>Barcelona, Spain</li>
                            <li>Rome, Italy</li>
                            <li>Los Angeles, US</li>
                            <li>New York, US</li>
                            <li>Pennsilvania, US</li>
                            <li>Stockholm, Sweden</li>
                            <li>London, United Kingdom</li>
                            <li>Sydney, Australia</li>
                        </ol>
                    </div>
                </section>
                <section class="total-actions">
                    <h4>Total number of actions</h4>
                    <hr>
                    <p class="text-center">32 485 853 494</p>
                </section>
            </article>
            <hr>
        </div>
        <div class="row">
            <article class="col-sm-5 piggy-bank">
                <div class="piggy-bank-wrapper">
                    <h4 class="piggy-bank-title">POINTS PIGGY BANK <span>IN THE LAST 24 HOURS</span></h4>
                    <div class="chart">

                    </div>
                </div>
            </article>
            <article class="col-sm-7 hot">
                <div class="hot-wrapper">
                    <h4 class="hot-title">WHAT’S HOT <span>IN THE LAST 24 HOURS</span></h4>
                    <div class="wrapper row">
                        <div class="purchases col-sm-3">
                            <h3 class="text-center">
                                233K
                            </h3>
                            <hr>
                            <p class="text-center">PURCHASES</p>
                        </div>
                        <div class="logins col-sm-3">
                            <h3 class="text-center">105K</h3>
                            <hr>
                            <p class="text-center">LOGINS</p>
                        </div>
                        <div class="social-actions col-sm-3">
                            <h3 class="text-center">63,2K</h3>
                            <hr>
                            <p class="text-center">SOCIAL ACTIONS</p>
                        </div>
                    </div>
                </div>
            </article>
        </div>
    </div>


    <script>
        mapboxgl.accessToken = 'pk.eyJ1Ijoia2FwaXRhbnl0bXMiLCJhIjoiY2pncDRpcThqMnp3MDMzcHE0MDk1dThiMyJ9.NrnJFH7IdJERStcuhuqfjw';
        var map = new mapboxgl.Map({
            container: 'map', // container id
            style: 'mapbox://styles/kapitanytms/cjhiva4l170k62rsby0ub0cp9', //hosted style id
            center: [-77.38, 39], // starting position
            zoom: 0, // starting zoom
            maxBounds: [ [-180, -60], [180, 85] ],
        });

        var geojson = {
            type: 'FeatureCollection',
            features: [{
                type: 'Feature',
                geometry: {
                    type: 'Point',
                    coordinates: [-77.032, 38.913]
                },
                properties: {
                    title: 'customer',
                    description: 'Washington, D.C.'
                }
            },
                {
                    type: 'Feature',
                    geometry: {
                        type: 'Point',
                        coordinates: [-122.414, 37.776]
                    },
                    properties: {
                        title: 'wallet',
                        description: 'San Francisco, California'
                    }
                },
                {
                    type: 'Feature',
                    geometry: {
                        type: 'Point',
                        coordinates: [-100.414, 60.776]
                    },
                    properties: {
                        title: 'wallet',
                        description: ''
                    }
                },
            ]
        };

        // add markers to map
        geojson.features.forEach(function(feature) {

            var wrapper = document.createElement('div');
            var point = document.createElement('div');
            wrapper.appendChild(point);
            if (feature.properties.title === 'customer') {
                // create a HTML element for each feature
                wrapper.className = 'marker-yellow-wrapper';
                point.className = 'marker-yellow';

            } else if (feature.properties.title === 'wallet') {
                // create a HTML element for each feature
                wrapper.className = 'marker-green-wrapper';
                point.className = 'marker-green';
            }
            // make a marker for each feature and add to the map
            new mapboxgl.Marker(wrapper)
                .setLngLat(feature.geometry.coordinates)
                .addTo(map);
        });


        var greenWrappers = document.querySelectorAll('.marker-green-wrapper');
        var yellowWrappers = document.querySelectorAll('.marker-yellow-wrapper');
        console.log(greenWrappers);
        console.log(yellowWrappers);
        greenWrappers.forEach(function(wrapper) {
            var pad = 0;
            setInterval(function() {
                wrapper.style.padding = (pad += 1) + "px";
                if (pad == 30) {
                    pad = 0;
                }
            }, 50);
        });
        yellowWrappers.forEach(function(wrapper) {
            var pad = 0;
            setInterval(function() {
                wrapper.style.padding = (pad += 1) + "px";
                if (pad == 30) {
                    pad = 0;
                }
            }, 50);
        });

    </script>


    <!--SCRIPT-->
	<!--<script src="./leaflet-realtime/dist/leaflet-realtime.js"></script>-->
    <!--<script>-->
        <!--var map = L.map('mapid'),-->
        <!--realtime = L.realtime({-->
            <!--url: 'https://wanderdrone.appspot.com/',-->
            <!--crossOrigin: true,-->
            <!--type: 'json'-->
        <!--}, {-->
            <!--interval: 1000-->
        <!--}).addTo(map);-->
        <!--L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token={accessToken}', {-->
            <!--attribution: 'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery © <a href="http://mapbox.com">Mapbox</a>',-->
            <!--maxZoom: 18,-->
            <!--id: 'mapbox.streets',-->
            <!--accessToken: 'pk.eyJ1Ijoia2FwaXRhbnl0bXMiLCJhIjoiY2pncDRpcThqMnp3MDMzcHE0MDk1dThiMyJ9.NrnJFH7IdJERStcuhuqfjw',-->
            <!--style: 'mapbox://styles/kapitanytms/cjhiva4l170k62rsby0ub0cp9',-->
        <!--}).addTo(map);-->

        <!--realtime.on('update', function() {-->
        <!--map.fitBounds(realtime.getBounds(), {maxZoom: 3});-->
        <!--});-->
    <!--</script>-->
</body>
</html>

